<!DOCTYPE html>
<html>
    <head> 
        <title>Ruta por Japón</title>
        <link rel="icon" href="IMAGENES/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="css/style.css">
        <!-- jQuery -->
        <script src='https://code.jquery.com/jquery-3.7.0.js'></script>
        <!-- Bootstrap 5 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
       </script>
        <!-- Font-awesome -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet"> 
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <!-- JS Scripts-->
        <script type="text/javascript" src="js/displayContents.js"></script>
        <script type="text/javascript" src="js/videoControls.js"></script>
        <!-- Dash.js -->
        <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
        <!-- HLS.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/0.8.2/hls.min.js"></script>
    </head>

    <body>
        <div class="bg-image">
            <!-- Homepage header-->
            <header>
                <!-- Navbar -->
                <nav class="navbar navbar-expand-md navbar-dark scrolling-navbar">
                    <a class="navbar-brand" href="javascript:location.reload();" id="title-brand">
                        <div class="title-nav">
                            <img src="assets/IMAGENES/title-icon.png" width="40" height="30" alt="" style="padding-bottom: 5px; padding-left: 5px;">
                            <span>Ruta por Japón</span>
                        </div>
                        <div class="d-flex mt-4" id="pr1-link">
                            <a class="nav-link nav-link-ltr" href="practica1/index_pr1.html" target="_blank"><span>Práctica 1</span></a>
                            <a class="nav-link nav-link-ltr mx-4" href="practica2/index_pr2.html" target="_blank"><span>Práctica 2</span></a>
                        </div>
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end pt-4" id="navbarNavAltMarkup">
                        <div class="nav ms-auto flex-column flex-md-row">
                            <ul class="navbar-nav">
                                <li class="nav-item active">
                                    <div id="dest-link">
                                        <a class="nav-link nav-link-ltr" href="https://www.japan.travel/es/destinations/" target="_blank"><span>Destinos</span></a>
                                    </div>
                                </li>
                                <li class="nav-item active">
                                    <a class="nav-link nav-link-ltr" href="https://triptile.com/japan" target="_blank"><span>Planifica tu viaje</span></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </header>
           
            <!-- City cards -->
            <div class="row cards-container mt-5 pt-3 pb-2 container-fluid">
                <div class="col col-lg-5 main-title">
                    <h1 class="fadeup"><strong>Descubre las maravillosas <br> ciudades de Japón</strong></h1>
                        <button class="mt-4 explore-btn" onclick="showCards()">¡Explora ahora! <i class="fas fa-arrow-right"></i></button>
                        <button class="button-85 mt-4 mx-4" onclick="showQuiz()">¡Juega al quiz! &nbsp; <i class="fas fa-gamepad"></i></button> 
                </div>
                <div class="col col-12 col-lg-4 cards pb-5" id="cards" style="opacity: 0;">
                    <div class="row gy-5">
                        <div class="mobile-margin col-12 col-md-6 col-lg-6">
                            <div class="card border-0" style="width: 20rem;" id="card-tokyo">
                                <img class="card-img-top" src="assets/IMAGENES/tokyo-bg.jpg" alt="Tokyo">
                                <div class="card-body">
                                    <h4 class="card-title text-white fw-bold">Tokyo</h4>
                                    <hr style="color:white; opacity: 1;">
                                    <p class="card-text">La vibrante capital de Japón. Es una metrópolis bulliciosa donde la tradición y la modernidad se entrelazan de manera fascinante.</p>
                                    <button class="tour-btn" id="tokyo-tour" onclick="changeVideo(1)">Iniciar tour <i class="fas fa-paper-plane"></i></button>
                                </div>
                            </div>
                        </div>

                        <div class="mobile-margin col-12 col-md-6 col-lg-6">
                            <div class="card border-0" style="width: 20rem;" id="card-osaka">
                                <img class="card-img-top" src="assets/IMAGENES/osaka-bg.jpg" alt="Osaka">
                                <div class="card-body">
                                    <h4 class="card-title text-white fw-bold">Osaka</h4>
                                    <hr style="color:white; opacity: 1;">
                                    <p class="card-text">La capital gastronómica de Japón. Es conocida por su ambiente animado donde las luces de neón y los restaurantes ofrecen un festín visual.</p>
                                    <button class="tour-btn" id="osaka-tour" onclick="changeVideo(2)">Iniciar tour <i class="fas fa-paper-plane"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
  
        <div class="container-fluid contents-container mb-0">
            <div class="mt-2" id="rooms" style="display: none;">
                <h4>Salas de juego disponibles</h4>
                <hr class="mt-0" style="opacity: 0;">
                <div class="row quiz-row">
                    <div class="col-6">Quiz de Tokyo &#128508;</div>
                    <div class="col-6">
                        <span style="font-size: 14px; color: white;">Nº jugadores: <span id="nPlayers-tokyo">0</span> / 4&nbsp;&nbsp; </span>
                        <button class="tokyo-room-btn">Unirse a la sala</button>
                  
                    </div>
                </div>
                <div class="row quiz-row">
                    <div class="col-6">Quiz de Osaka &#127983;</div>
                    <div class="col-6">
                        <span style="font-size: 14px; color: white;">Nº jugadores: <span id="nPlayers-osaka">0</span> / 4&nbsp;&nbsp;</span>
                        <button class="osaka-room-btn">Unirse a la sala</button>
                    </div>
                </div>
                <div class="row quiz-row">
                    <div class="col-6">Quiz de Kyoto &#127982;</div>
                    <div class="col-6">
                        <span style="font-size: 14px; color: white;">Nº jugadores: <span id="nPlayers-kyoto">0</span> / 4&nbsp;&nbsp;</span>
                        <button class="kyoto-room-btn">Unirse a la sala</button>
                    </div>
                </div>
                <div class="row quiz-row">
                    <div class="col-6">Quiz de Fukuoka &#127800;</div>
                    <div class="col-6">
                        <span style="font-size: 14px; color: white;">Nº jugadores: <span id="nPlayers-fukuoka">0</span> / 4&nbsp;&nbsp;</span>
                        <button class="fukuoka-room-btn">Unirse a la sala</button>
                    </div>
                </div>
                <div class="mt-3" id="con-user"></div>
                
                <form id="usernameForm" class="username-form">
                  <input type="text" required minlength="2" maxlength="10" id="usernameInput" placeholder="Ingresa tu nombre de usuario"
                    style="font-size: medium; width: 50%; border-radius: 5px; padding-left: 0.5em;">
                  <button id="submitUsername"><i class="fas fa-paper-plane"></i></button>
                </form>

            </div>
            <div class="mt-2 mx-4" id="tokyo-room" style="display: none;">
                <div class="row">
                    <div class="col-4">
                        <div class="row">
                            <div class="col-6" id="players-tokyo"><b>Jugadores</b></div>
                            <div class="col-6" id="points-tokyo"><b>Puntos</b></div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="row">
                            <div class="col-6"><h4>Quiz de Tokyo &#128508;</h4></div>
                            <div class="col-6 text-end" style="padding-top: 0.25em; padding-right: 1em;">Pregunta <span id="round-tokyo"></span>/10</div>
                        </div>
                        <hr class="mt-0" style="color: white; opacity: 1;">
                    </div>
                </div>
            </div>
            <div class="mt-2 mx-4" id="osaka-room" style="display: none;">
                <div class="row">
                    <div class="col-4">
                        <div class="row">
                            <div class="col-6" id="players-osaka"><b>Jugadores</b></div>
                            <div class="col-6" id="points-osaka"><b>Puntos</b></div>
                        </div>

                    </div>
                    <div class="col-8">
                        <div class="row">
                            <div class="col-6"><h4>Quiz de Osaka &#127983;</h4></div>
                            <div class="col-6 text-end" style="padding-top: 0.25em; padding-right: 1em;">Pregunta <span id="round-osaka"></span>/10</div>
                        </div>
                        <hr class="mt-0" style="color: white; opacity: 1;">
                    </div>
                </div>
            </div>
            <div class="mt-2 mx-4" id="kyoto-room" style="display: none;">
                <div class="row">
                    <div class="col-4">
                        <div class="row">
                            <div class="col-6" id="players-kyoto"><b>Jugadores</b></div>
                            <div class="col-6" id="points-kyoto"><b>Puntos</b></div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="row">
                            <div class="col-6"><h4>Quiz de Kyoto &#127982;</h4></div>
                            <div class="col-6 text-end" style="padding-top: 0.25em; padding-right: 1em;">Pregunta <span id="round-kyoto"></span>/10</div>
                        </div>
                        <hr class="mt-0" style="color: white; opacity: 1;">
                    </div>
                </div>
            </div>
            <div class="mt-2 mx-4" id="fukuoka-room" style="display: none;">
                <div class="row">
                    <div class="col-4">
                        <div class="row">
                            <div class="col-6" id="players-fukuoka"><b>Jugadores</b></div>
                            <div class="col-6" id="points-fukuoka"><b>Puntos</b></div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="row">
                            <div class="col-6"><h4>Quiz de Fukuoka &#127800;</h4></div>
                            <div class="col-6 text-end" style="padding-top: 0.25em; padding-right: 1em;">Pregunta <span id="round-fukuoka"></span>/10</div>
                        </div>
                        <hr class="mt-0" style="color: white; opacity: 1;">
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Contenedor del video -->
                <div class="col col-8 col-lg-5 video-container pt-0 pb-0">
                    <!-- Videos -->
                    <video class="video-item" src="assets/VIDEOS/tokyo_1080p.mp4" autoplay height="auto" width="100%" id="video-tokyo" style="display:none;" preload="metadata">
                        <source src="assets/VIDEOS/Tokyo.webm">
                        <source src="assets/VIDEOS/tokyo_240p.mp4">
                        <source src="assets/VIDEOS/tokyo_360p.mp4">
                        <source src="assets/VIDEOS/tokyo_480p.mp4">
                        <source src="assets/VIDEOS/tokyo_720p.mp4">
                        <source src="assets/VIDEOS/tokyo_1080p.mp4">
                        <track kind="subtitles" src="assets/VTT/tokyo.vtt" label="captionsTokyo" id="capts-tokyo" default="">
                        <track kind="metadata" src="assets/VTT/tokyo-chapters-facts.vtt" label="curiosidadesTokyo" id="facts-tokyo" default="">
                        <track kind="metadata" src="assets/VTT/tokyo-quiz.vtt" label="quizTokyo" id="quiz-tokyo" default="">
                    </video>

                    <canvas id="canvasTokyo" style="display:none;"></canvas>

                    <video class="video-item" src="assets/VIDEOS/osaka_1080p.mp4" autoplay height="360" id="video-osaka" style="display:none">
                        <source src="assets/VIDEOS/Osaka.webm">
                        <source src="assets/VIDEOS/osaka_240p.mp4">
                        <source src="assets/VIDEOS/osaka_360p.mp4">
                        <source src="assets/VIDEOS/osaka_480p.mp4">
                        <source src="assets/VIDEOS/osaka_720p.mp4">
                        <source src="assets/VIDEOS/osaka_1080p.mp4">
                        <track kind="subtitles" src="assets/VTT/osaka.vtt" label="captionsOsaka" id="capts-osaka" default="">
                        <track kind="metadata" src="assets/VTT/osaka-chapters-facts.vtt" label="curiosidadesOsaka" id="facts-osaka" default="">
                        <track kind="metadata" src="assets/VTT/osaka-quiz.vtt" label="quizOsaka" id="quiz-osaka" default="">
                    </video>

                    <canvas id="canvasOsaka" style="display:none;"></canvas>

                    <!-- Barra de progreso del vídeo -->
                    <div class="video-controls" style="display: none;">
                        <div class="video-timeline pt-2">
                            <div class="progress-container">
                                <div class="progress-bar"></div>
                            </div>
                        </div>
                        <!-- Controles del vídeo -->
                        <ul class="video-options px-0">
                            <li class="options">
                                <!-- Tiempos del video -->
                                <div class="video-timer pt-3">
                                    <p class="current-time">00:00</p>
                                    <p class="time-sep">&nbsp/&nbsp</p>
                                    <p class="end-time">15:00</p>
                                    <p class="chapter-sep">&nbsp·&nbsp</p>
                                    <p class="chapter-name"></p>
                                </div>
                            </li>
                            <li class="options center">
                                <!-- Botones retroceder, iniciar/pausar, avanzar video -->
                                <button class="backward-btn" onclick="backwardVideo()"><i class="fas fa-backward"></i></button>
                                <button class="play-btn" onclick="playVideo()"><i class="fas fa-play"></i></button>
                                <button class="forward-tbn" onclick="forwardVideo()"><i class="fas fa-forward"></i></button>
                            </li>
                            <li class="options" id="opt-right">
                                <!-- Botones cambiar velocidad, cambiar calidad, pantalla completa-->
                                <button id="captureBtn" data-toggle="tooltip" data-placement="top" title="¡Analiza la imagen con IA!"><i class="fas fa-camera"></i></button>
                                <script>
                                    $(document).ready(function(){
                                      $('[data-toggle="tooltip"]').tooltip();   
                                    });
                                </script>
                                <div class="dropup">
                                    <button class="btn speed-btn" data-bs-toggle="dropdown">
                                        <i class="fas fa-gauge"></i>
                                    </button>
                                    <ul class="dropdown-menu speed-options">
                                        <li class="dropdown-item">2</li>
                                        <li class="dropdown-item">1.75</li>
                                        <li class="dropdown-item">1.5</li>
                                        <li class="dropdown-item">1.25</li>
                                        <li class="dropdown-item">1</li>
                                        <li class="dropdown-item">0.75</li>
                                        <li class="dropdown-item">0.5</li>
                                        <li class="dropdown-item">0.25</li>
                                    </ul>
                                </div>
                                <div class="dropup">
                                    <button class="btn quality-btn" data-bs-toggle="dropdown" onclick="addVideoQuality()">
                                        <i class="fas fa-sliders"></i>
                                    </button>
                                    <ul class="dropdown-menu quality-options">
                                        <li class="dropdown-item">240p</li>
                                        <li class="dropdown-item">360p</li>
                                        <li class="dropdown-item">480p</li>
                                        <li class="dropdown-item">720p</li>
                                        <li class="dropdown-item">1080p</li>
                                        <li class="dropdown-item">MPEG-DASH</li>
                                        <li class="dropdown-item">HLS</li>
                                    </ul>
                                </div>
                                <button class="fullscreen-btn" onclick="fullscreen()"><i class="fas fa-expand"></i></button>
                            </li>    
                        </ul>

                        <!-- Modal -->
                        <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content" style="background-color: rgba(109, 107, 107, 0.167);">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="imageModalLabel">Objetos detectados en la imagen</h5>
                                    </div>
                                    <div class="modal-body">
                                        <img id="modalImage" src="" alt="Captured Image" class="img-fluid">
                                        <div id="loadingMessage" class="text-center mt-3">Analizando la imagen...</div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn" data-dismiss="modal" onclick="dismissModal()"><i class="fas fa-x" style="color: white"></i></button>
                                        <script>
                                            function dismissModal(){
                                                $("#imageModal").modal('hide');
                                            }
                                        </script>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col col-12 col-lg-6 desc pt-3 h-60">
                    <div id="info-tokyo" style="display: none;">
                        <h2><strong>TOKYO</strong> &#128508;</h2>
                        <h5><i>"El latido del corazón de Japón"</i></h5>
                        <p class="pt-3">
                            Tokyo es una metrópolis vibrante y dinámica que combina la rica historia y cultura japonesa con la modernidad y la innovación. 
                            Es conocida por ser una de las ciudades más grandes y pobladas del mundo, con una energía que nunca se detiene.
                        </p>
                        <iframe class="gmap_iframe" width="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src=""></iframe>
                    </div>
                    <div id="info-osaka" style="display: none;">
                        <h2><strong>OSAKA</strong> &#127983;</h2>
                        <h5><i>"Vibrante, acogedora, inolvidable"</i></h5>
                        <p class="pt-3">
                            Osaka es una ciudad conocida por su atmósfera vibrante y acogedora que deja una impresión duradera en todos sus visitantes. 
                            Esta metrópolis japonesa es un centro cultural, gastronómico y económico bullicioso que ofrece una rica historia, una cultura fascinante y una deliciosa comida callejera.
                        </p>
                        <iframe class="gmap_iframe" width="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src=""></iframe>
                    </div>
                    <div id="curiosidades-osaka"></div>
                    <div id="curiosidades-tokyo"></div>
                    <div id="preguntas-osaka"></div>
                    <div id="preguntas-tokyo"></div>
                    <div id="preguntas-correctas" ></div>
                </div>
                <div class="col-10 places">
                    <div style="display: none;" id="places-tokyo">
                        <h2>Lugares de interés de Tokyo<h2>
                        <div class="places-cards pt-3" id="cards-tokyo">
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/akihabara.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Akihabara</h5>
                                </div>
                            </div>
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/sensoji.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Templo Senso-ji</h5>
                                </div>
                            </div>
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/tokyo-tower.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Tokyo Tower</h5>
                                </div>
                            </div>
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/shibuya.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Cruce de Shibuya</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="display: none;" id="places-osaka">
                        <h2>Lugares de interés de Osaka<h2>
                        <div class="places-cards pt-3" id="cards-osaka">
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/dotonbori.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Dotonbori</h5>
                                </div>
                            </div>
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/castillo-osaka.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Castillo de Osaka</h5>
                                </div>
                            </div>
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/shinsekai.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Shinsekai</h5>
                                </div>
                            </div>
                            <div class="card-place card bg-dark text-white" style="width: 20rem; height: 20rem; background-image: url('assets/IMAGENES/kuromon.jpg'); background-size: cover; background-position: center; cursor: pointer;">
                                <div class="card-img-overlay">
                                    <h5 class="card-title">Mercado Kuromon</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <!-- Socket.IO -->
    <script src="socket.io/socket.io.js"></script>
    <script type="text/javascript" src="js/quiz.js"></script>
    </body>
</html>
